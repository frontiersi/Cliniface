<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html>
<head>
    <title>Command Line Interface</title>
    <link rel="stylesheet" type="text/css" href="../styles/main.css">
    <script src="../scripts/topButton.js"></script>
    <button onclick="topFunction()" id="topButton" title="Back to top">Back to top</button>
</head>
<body id="_top">

<center><a href="https://cliniface.org"><img src="../images/logo_357x110.png" alt="Cliniface Logo"></a></center>
<center><h1>Command Line Interface</h1></center>
<hr>

<p>
Cliniface has a simple command line interface for some common operations that are useful if
writing scripts to collate data from multiple 3D images. Run the Cliniface executable from
the command line with the -h or --help switch to see all available options.
</p>

<h2>File format conversions</h2>
<p>
3D images can be converted from one format to another using the command line.
Passing a path to a single 3D image file opens it in Cliniface's GUI.
Passing a second file or directory path does not open the GUI but causes the first file
to be converted to the format specified by the suffix / extension of the second filepath.
If the second path has no suffix, the path is treated as a directory which is created if it
doesn't already exist, and a 3DF is saved into the directory.
</p>

<p>
The default filetype is 3DF, but a different output filetype can be specified.
If a non-3DF file is specified, landmarks and other metadata <em>are not saved</em>.
The possible export formats are OBJ, PLY, STL, U3D, and 3DF.
</p>

<p>
If a file already exists at the output destination, you will be asked to confirm (y / yes)
overwriting of the file. Pass the -f or --force switch to skip confirmation and force through
any potential overwrite.
</p>

<p>
The command below converts <tt>myimage.obj</tt> to PLY format and saves it within directory
<tt>path_to_output</tt>:
</p>
<pre>
cliniface path_to_file/myimage.obj path_to_output/myimage.ply
</pre>

<p>
Both of the commands below generate a 3DF from <tt>myimage.obj</tt> and save it in
directory <tt>path_to_output</tt>:
</p>
<pre>
cliniface path_to_file/myimage.obj path_to_output/myimage.3df
cliniface path_to_file/myimage.obj path_to_output
</pre>

<h2>Face / landmark detection</h2>
<p>
Face extraction and landmark detection / mapping can also be performed from the command line.
However, it is usually better to first open 3DF files in Cliniface's user interface and
confirm or adjust landmark positions since the region of face cropped is demarcated by
the positions of the outermost landmarks.
</p>
<p>
To identify and reject non-face parts of the model,
pass the -s or --slice switch. Pass the -m or --map switch to perform mask / landmark mapping.
Facial extraction is performed before landmark mapping if both switches are passsed.
The command below extracts the face, detects and maps landmarks, and saves the output
at <tt>path_to_file/myimage.3df</tt>:
</p>

<pre>
cliniface path_to_file/myimage.ply -cm
</pre>

<h2>Exporting the correspondence mask</h2>
<p>
To export only the mask that was found and mapped to the input face as part of the
landmark detection / mapping process, pass the -k or --mask switch. The command below exports
just the mask from a previously generated 3DF file to <tt>mask.ply</tt> in the current directory:
</p>

<pre>
cliniface path_to_file/myimage.3df -k mask.ply
</pre>

<h2>Copying user measurements</h2>
<p>
Measurements can be copied from a source 3DF file to a target 3DF file, or to all 3DF files
within the top level of a named folder by passing the -c or --copy switch. The source and target
3DFs must already be coregistered to the same anthropometric mask (i.e., landmark detection must
have been carried out on all files). The first command below copies all user measurements from the
default assessment (the active assessment upon saving) of <tt>source.3df</tt> to <tt>target.3df</tt>.
The second command copies the measurements from <tt>source.3df</tt> to all 3DF files found in the
folder named <tt>path_containing_3dfs</tt>. After running the second command, progress is output
as each of the target 3DFs is updated. Note that to update a 3DF, it must be writable.
</p>

<pre>
cliniface -c path_to_file/source.3df path_to_file/target.3df
cliniface -c path_to_file/source.3df path_containing_3dfs
</pre>

<h2>Exporting metadata</h2>
<p>
With a 3DF file as input (or after passing the -m switch), metadata about
the landmarks and measurements extracted by Cliniface can be exported. This
is performed by specifying an output file with one of the export format extensions: CSV, XML, or JSON.
See <a href="import_export.html">here</a> for more information about exporting metadata.
The command below exports the metadata contained in myimage.3df to the named CSV file:
</p>
<pre>
cliniface path_to_file/myimage.3df path_to_metadata/myimage.csv
</pre>

<h2>Generating reports</h2>
<p>
Reports can be generated by passing the -r or --report switch along with the id of the report to
be generated. As well as the input file which can be either a 3DF or a non-3DF file if passing
the -m switch, you must specify an output file with "pdf" as the extension / suffix. Passing
an invalid id value (e.g., -1) lists the available reports to generate and then exits.
The command below generates and exports the standard morphological summary report
for input file myimage.3df and saves it to the named PDF file:
</p>
<pre>
cliniface -r 0 path_to_file/myimage.3df path_to_output/report.pdf
</pre>

<br>
<hr>
<center>
<a href="#_top">Back to top</a>
<strong><p>&copy; 2018-2021 SIS Research Limited &amp; Richard Palmer</p></strong>
</center>

</body>
</html>

